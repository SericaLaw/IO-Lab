CODE SEGMENT
    ASSUME DS:CODE
INIT:
    MOV AL,0FH
    OUT 24H,AL;initialize digit
    IN AX,12H
    MOV BX,AX
    AND BX,000DH;SW19,18,16
    CMP BX,000DH
    JNE INIT
    MOV BL,00110000B
    AND AL,00011110B
    SHR AL,1
    OR AL,BL
    OUT 46H,AL
AGAIN:
    IN AX,12H
    TEST AX,0020H;SW21
    JZ READ
    IN AX,10H
    OUT 40H,AL
    MOV AL,AH
    OUT 40H,AL
READ:
    IN AX,12H
    TEST AX,0040H;SW22
    JZ RD_COUNT
    MOV AL,11100010B
    OUT 46H,AL
    IN AL,40H
    MOV AH,0
    JMP DISPLAY
RD_COUNT:
    MOV AL,11010010B
    OUT 46H,AL
    IN AL,40H
    MOV AH,AL
    IN AL,40H
    XCHG AH,AL
DISPLAY:
    OUT 20H,AX
    JMP AGAIN
CODE ENDS
END INIT
